{"ast":null,"code":"var _jsxFileName = \"F:\\\\DuiPangres\\\\frontend\\\\src\\\\screens\\\\SingleBusiness.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport { useContext, useEffect, useReducer, useRef, useState } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport Card from \"react-bootstrap/Card\";\nimport ListGroup from \"react-bootstrap/ListGroup\";\nimport Form from \"react-bootstrap/Form\";\nimport Badge from \"react-bootstrap/Badge\";\nimport Button from \"react-bootstrap/Button\";\nimport Rating from \"../components/Rating\";\nimport { Helmet } from \"react-helmet-async\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\nimport { getError } from \"../utils\";\nimport { Store } from \"../Store\";\nimport FloatingLabel from \"react-bootstrap/FloatingLabel\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"REFRESH_BUSINESS\":\n      return { ...state,\n        business: action.payload\n      };\n\n    case \"CREATE_REQUEST\":\n      return { ...state,\n        loadingCreateReview: true\n      };\n\n    case \"CREATE_SUCCESS\":\n      return { ...state,\n        loadingCreateReview: false\n      };\n\n    case \"CREATE_FAIL\":\n      return { ...state,\n        loadingCreateReview: false\n      };\n\n    case \"FETCH_REQUEST\":\n      return { ...state,\n        loading: true\n      };\n\n    case \"FETCH_SUCCESS\":\n      return { ...state,\n        business: action.payload,\n        loading: false\n      };\n\n    case \"FETCH_FAIL\":\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nfunction SingleBusinessScreen() {\n  _s();\n\n  let reviewsRef = useRef();\n  const [selectedImage, setSelectedImage] = useState(\"\");\n  const navigate = useNavigate();\n  const params = useParams();\n  const {\n    slug\n  } = params;\n  const [{\n    loading,\n    error,\n    business,\n    loadingCreateReview\n  }, dispatch] = useReducer(reducer, {\n    business: [],\n    loading: true,\n    error: \"\"\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({\n        type: \"FETCH_REQUEST\"\n      });\n\n      try {\n        const result = await axios.get(`/api/businesses/slug/${slug}`);\n        dispatch({\n          type: \"FETCH_SUCCESS\",\n          payload: result.data\n        });\n      } catch (err) {\n        dispatch({\n          type: \"FETCH_FAIL\",\n          payload: getError(err)\n        });\n      }\n    };\n\n    fetchData();\n  }, [slug]);\n  const {\n    state,\n    dispatch: ctxDispatch\n  } = useContext(Store);\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    let {\n      mobile,\n      datetime,\n      address\n    } = e.target.elements;\n    mobile = mobile.value;\n    address = address.value;\n    datetime = datetime.value.split('T');\n\n    if (new Date(datetime).getTime() < Date.now() + 60 * 15 * 1000) {\n      alert('Old date and time is not allowed');\n      return;\n    }\n\n    const {\n      data\n    } = await axios.post('/api/users/booking', {\n      name,\n      email,\n      password\n    });\n    ctxDispatch({\n      type: 'USER_SIGNIN',\n      payload: data\n    });\n  };\n\n  return loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n    variant: \"danger\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"img-large\",\n          src: selectedImage || business.image,\n          alt: business.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(ListGroup, {\n          variant: \"flush\",\n          children: [/*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: [/*#__PURE__*/_jsxDEV(Helmet, {\n              children: /*#__PURE__*/_jsxDEV(\"title\", {\n                children: business.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: business.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n            children: [\"Description:\", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: business.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: /*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                onSubmit: submitHandler,\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"email\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Booking Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    name: \"datetime\",\n                    type: \"datetime-local\",\n                    required: true,\n                    min: new Date()\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 126,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"email\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Contact Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    name: \"mobile\",\n                    type: \"number\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  controlId: \"email\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Pickup Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    name: \"address\",\n                    type: \"text\",\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  variant: \"primary\",\n                  children: \"Book Appointment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SingleBusinessScreen, \"BUE2h6yvhk6+Lwp4SpLx8mWSYsc=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = SingleBusinessScreen;\nexport default SingleBusinessScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"SingleBusinessScreen\");","map":{"version":3,"sources":["F:/DuiPangres/frontend/src/screens/SingleBusiness.js"],"names":["axios","useContext","useEffect","useReducer","useRef","useState","Link","useNavigate","useParams","Row","Col","Card","ListGroup","Form","Badge","Button","Rating","Helmet","LoadingBox","MessageBox","getError","Store","FloatingLabel","toast","reducer","state","action","type","business","payload","loadingCreateReview","loading","error","SingleBusinessScreen","reviewsRef","selectedImage","setSelectedImage","navigate","params","slug","dispatch","fetchData","result","get","data","err","ctxDispatch","submitHandler","e","preventDefault","mobile","datetime","address","target","elements","value","split","Date","getTime","now","alert","post","name","email","password","image","description"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useContext, useEffect, useReducer, useRef, useState } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\";\r\nimport Form from \"react-bootstrap/Form\";\r\nimport Badge from \"react-bootstrap/Badge\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Rating from \"../components/Rating\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport LoadingBox from \"../components/LoadingBox\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { getError } from \"../utils\";\r\nimport { Store } from \"../Store\";\r\nimport FloatingLabel from \"react-bootstrap/FloatingLabel\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"REFRESH_BUSINESS\":\r\n      return { ...state, business: action.payload };\r\n    case \"CREATE_REQUEST\":\r\n      return { ...state, loadingCreateReview: true };\r\n    case \"CREATE_SUCCESS\":\r\n      return { ...state, loadingCreateReview: false };\r\n    case \"CREATE_FAIL\":\r\n      return { ...state, loadingCreateReview: false };\r\n    case \"FETCH_REQUEST\":\r\n      return { ...state, loading: true };\r\n    case \"FETCH_SUCCESS\":\r\n      return { ...state, business: action.payload, loading: false };\r\n    case \"FETCH_FAIL\":\r\n      return { ...state, loading: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nfunction SingleBusinessScreen() {\r\n  let reviewsRef = useRef();\r\n\r\n  \r\n  const [selectedImage, setSelectedImage] = useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n  const params = useParams();\r\n  const { slug } = params;\r\n\r\n  const [{ loading, error, business, loadingCreateReview }, dispatch] =\r\n    useReducer(reducer, {\r\n      business: [],\r\n      loading: true,\r\n      error: \"\",\r\n    });\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      dispatch({ type: \"FETCH_REQUEST\" });\r\n      try {\r\n        const result = await axios.get(`/api/businesses/slug/${slug}`);\r\n        dispatch({ type: \"FETCH_SUCCESS\", payload: result.data });\r\n      } catch (err) {\r\n        dispatch({ type: \"FETCH_FAIL\", payload: getError(err) });\r\n      }\r\n    };\r\n    fetchData();\r\n  }, [slug]);\r\n\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  \r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    let {mobile, datetime, address} = e.target.elements\r\n    mobile = mobile.value\r\n    address = address.value\r\n    datetime = datetime.value.split('T');\r\n    \r\n    if(new Date(datetime).getTime()  < Date.now() + 60*15 *1000){\r\n      alert('Old date and time is not allowed')\r\n      return\r\n    }\r\n    const { data } = await axios.post('/api/users/booking', {\r\n      name,\r\n      email,\r\n      password,\r\n    });\r\n    ctxDispatch({ type: 'USER_SIGNIN', payload: data });\r\n  };\r\n  return loading ? (\r\n    <LoadingBox />\r\n  ) : error ? (\r\n    <MessageBox variant=\"danger\">{error}</MessageBox>\r\n  ) : (\r\n    <div>\r\n      <Row>\r\n        <Col md={4}>\r\n          <img\r\n            className=\"img-large\"\r\n            src={selectedImage || business.image}\r\n            alt={business.name}\r\n          ></img>\r\n        </Col>\r\n        <Col md={4}>\r\n          <ListGroup variant=\"flush\">\r\n            <ListGroup.Item>\r\n              <Helmet>\r\n                <title>{business.name}</title>\r\n              </Helmet>\r\n              <h1>{business.name}</h1>\r\n            </ListGroup.Item>\r\n           \r\n            <ListGroup.Item>\r\n              Description:\r\n              <p>{business.description}</p>\r\n            </ListGroup.Item>\r\n          </ListGroup>\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <ListGroup variant=\"flush\">                \r\n                  <Form onSubmit={submitHandler}>\r\n                    <Form.Group className=\"mb-3\" controlId=\"email\">\r\n                      <Form.Label>Booking Date</Form.Label>\r\n                      <Form.Control name=\"datetime\" type=\"datetime-local\" required min={new Date()} />\r\n                    </Form.Group>\r\n                    {/* <Form.Group className=\"mb-3\" controlId=\"email\">\r\n          <Form.Label>Booking Time</Form.Label>\r\n          <Form.Control\r\n            type=\"date\"\r\n\r\n            required\r\n          />\r\n        </Form.Group> */}\r\n\r\n                    <Form.Group className=\"mb-3\" controlId=\"email\">\r\n                      <Form.Label>Contact Number</Form.Label>\r\n                      <Form.Control name=\"mobile\" type=\"number\" required />\r\n                    </Form.Group>\r\n                    <Form.Group className=\"mb-3\" controlId=\"email\">\r\n                      <Form.Label>Pickup Address</Form.Label>\r\n                      <Form.Control name=\"address\" type=\"text\" required />\r\n                    </Form.Group>\r\n                    <Button type=\"submit\" variant=\"primary\">\r\n                      Book Appointment\r\n                    </Button>\r\n                  </Form>\r\n              </ListGroup>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n\r\n    </div>\r\n  );\r\n}\r\nexport default SingleBusinessScreen;\r\n"]},"metadata":{},"sourceType":"module"}